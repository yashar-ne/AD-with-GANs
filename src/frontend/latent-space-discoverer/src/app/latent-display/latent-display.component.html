<div class="latent-display">
  <div *ngIf="shiftedImages$ | async as imageStrip else noImages">
    <div *ngIf="dim > maxdim else sessionDone">
      <div class="latent_image_wrapper">
        <div *ngFor="let strip of imageStrip">
          <img class="latent_image" src="{{'data:image/png;base64,' + strip.image}}">
        </div>
<!--        <p>{{dim}}/{{maxdim}}</p>-->
      </div>
      <latent-display-controls
        (yesClick)="yesClickHandler()"
        (noClick)="noClickHandler()">
      </latent-display-controls>
    </div>
    <ng-template #sessionDone>
      <div class="done-wrapper">
        <div>Session done. You successfully labeled all dimensions!</div>
        <button
          class="button yes"
          mat-fab
          color="accent"
          color="primary"
          (click)="restartHandler()"
        >
          <mat-icon>replay</mat-icon>
        </button>
      </div>
    </ng-template>
  </div>
  <ng-template #noImages>
    <div *ngIf="!sessionStarted else loading">
      <div class="latent-display-parameter-settings-wrapper">
        <mat-form-field>
          <mat-label>Select the range of shifts</mat-label>
          <mat-select [(value)]="shiftRange">
            <mat-option *ngFor="let option of shiftRangeSelectOptions"
            [value]="option">
              {{option}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Select the number of shifts</mat-label>
          <mat-select [(value)]="shiftCount">
            <mat-option *ngFor="let option of shiftCountSelectOptions"
            [value]="option">
              {{option}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-raised-button color="primary" (click)="startHandler()">Start</button>
      </div>
    </div>
    <ng-template #loading>
      <p>loading next images...</p>
    </ng-template>
  </ng-template>

</div>
